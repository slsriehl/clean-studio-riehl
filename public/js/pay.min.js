function stripeTokenHandler(e,t){if(t.textContent)t.textContent=t.textContent+"  You cannot submit a payment while there's an error";else{var n=document.getElementById("payment-form"),r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","stripeToken"),r.setAttribute("value",e.id),n.appendChild(r),n.submit()}}function createToken(){stripe.createToken(card).then(function(e){var t=document.getElementById("card-errors");e.error?t.textContent=e.error.message:stripeTokenHandler(e.token,t)})}var attachDynamicListener=function(e,t,n,r,o){e.addEventListener(t,function(e){dynamicListener(e.target,n,r,o)})},dynamicListener=function(e,t,n,r){e==t&&t.addEventListener(n,function(e){r(e)})};document.addEventListener("DOMContentLoaded",function(){for(var e=[].slice.call(document.getElementsByClassName("payment--slider")),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){showSwitchInput(e.target)});attachDynamicListener(document.querySelector("body"),"click",document.getElementById("partial-payment-amount"),"change",changeListenerForCorrectCharge);var n=document.getElementById("payment-form");card.mount("#card-element"),card.addEventListener("change",function(e){var t=document.getElementById("card-errors");e.error?t.textContent=e.error.message:t.textContent=""}),n.addEventListener("submit",function(e){e.preventDefault(),createToken()})});var stripe=new Stripe("pk_live_4IUfJ0HnfL0HMYA6yUfiH898"),elements=stripe.elements(),card=elements.create("card",{style:{base:{fontSize:"30px",color:"#444444"},invalid:{color:"red"}}}),showSwitchInput=function(e){var t=e.parentNode.childNodes[1],n=e.parentNode.parentNode.parentNode.childNodes[3],r=n.childNodes[1].childNodes[1];1==t.checked?(r&&(r.value="",revertButton(r)),t.checked=!1,n.style.display="none"):(t.checked=!0,n.style.display="block")},getTotalDue=function(){var e=document.getElementById("invoiceTotal"),t=document.getElementById("balanceDue");return t?t.textContent:e.textContent},revertButton=function(e){var t=getTotalDue(),n=document.getElementById("amountReplace"),r=document.getElementById("amount");e.value||(console.log("foo"),n.textContent=t,r.value=t)},changeListenerForCorrectCharge=function(e){var t,n=getTotalDue(),r=document.getElementById("amountReplace"),o=document.getElementById("amount"),a=document.getElementById("card-errors"),c=e.target.value;t=-1!=c.indexOf("$")?c.replace("$","").trim():c.trim(),isNaN(parseFloat(t))?a.textContent="The partial payment amount must be a number":t>n?a.textContent="You cannot pay more than you owe.":(a.textContent="",r.textContent=t,o.value=t,revertButton(e.target))};