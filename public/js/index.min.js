var onScrollFunction=function(e){for(var t={},n=[].slice.call(document.getElementsByClassName("section__sites")),i=0;i<n.length;i++)console.log(n[i].id+" -- "+n[i].offsetTop),t[n[i].id]=n[i].offsetTop;var s=document.documentElement.scrollTop||document.body.scrollTop,i=0;for(i in t)t[i]<=s&&(document.querySelector(".header--inverse").classList.remove("header--inverse"),document.querySelector('a[href*="'+i+'"]').classList.add("header--inverse"));window.location.hash=document.querySelector(".header--inverse").getAttribute("href")},removeHighlighting=function(){document.querySelector(".header--inverse")&&document.querySelector(".header--inverse").classList.remove("header--inverse")},addHighlighting=function(){window.location.hash?document.querySelector('a[href*="'+window.location.hash+'"]').classList.add("header--inverse"):document.querySelector('a[href*="#about"]').classList.add("header--inverse")},isValidElement=function(e){return e.name&&e.value},isValidValue=function(e){return!["checkbox","radio"].includes(e.type)||e.checked},formToJson=function(e){return[].reduce.call(e,function(e,t){return isValidElement(t)&&isValidValue(t)&&(e[t.name]=t.value),e},{})},request=function(e,t,n){return new Promise(function(i,s){var l=new XMLHttpRequest;return l.open(e,t),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.onload=function(){200==l.status?i(l.responseText):s(new Error(l.statusText))},l.onerror=function(){s(new Error("unknown error"))},l.send(JSON.stringify(n))})};document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("menuToggle"),t=document.getElementById("headerMenu"),n=document.getElementById("menuOverlay"),i=function(i){"hidden"==window.getComputedStyle(t,null).getPropertyValue("visibility")?(t.style.visibility="visible",n.style.visibility="visible",e.style.visibility="hidden",t.style.zIndex="150",n.style.zIndex="105"):(t.style.visibility="hidden",n.style.visibility="hidden",e.style.visibility="visible",t.style.zIndex="-1",n.style.zIndex="-1")};e.addEventListener("click",i),n.addEventListener("click",i);var s=[].slice.call(document.getElementsByClassName("header__menu__item"));if(document.documentElement.clientWidth<826){removeHighlighting();for(o=0;o<s.length;o++)s[o].addEventListener("click",i)}else window.addEventListener("scroll",onScrollFunction);window.addEventListener("resize",function(l){if(document.documentElement.clientWidth>=826){addHighlighting(),window.addEventListener("scroll",onScrollFunction),t.style.visibility="visible",n.style.visibility="hidden",e.style.display="none",t.style.zIndex="150",n.style.zIndex="-1";for(o=0;o<s.length;o++)s[o].removeEventListener("click",i)}else{removeHighlighting(),window.removeEventListener("scroll",onScrollFunction),t.style.visibility="hidden",n.style.visibility="hidden",e.style.display="block",t.style.zIndex="-1",n.style.zIndex="-1";for(var o=0;o<s.length;o++)s[o].addEventListener("click",i)}});for(var l=[].slice.call(document.getElementsByClassName("contact__input")),o=0;o<l.length;o++)l[o].addEventListener("blur",function(){this.value?this.classList.add("contact__input--filled"):this.classList.contains("contact__input--filled")&&this.classList.remove("contact__input--filled")});var r=document.getElementById("emailStudioRiehl"),d=document.getElementById("replaceOnSubmit");r.addEventListener("submit",function(e){submitForm(e,r,d)})});var submitForm=function(e,t,n){e.preventDefault();var i,s=formToJson(e.target.elements);return request("POST","/mail",s).then(function(e){renderMessage(t,n,i="true"==e?"Your message was successfully sent.  ":"Sorry, we couldn't send your message.  Try again later.  ")}).catch(function(e){renderMessage(t,n,i="Sorry, we couldn't send your message.  Try again later.  ")})},renderMessage=function(e,t,n){t.innerHTML=n,"Your message was successfully sent.  "==n?e.style.display="none":t.style.color="#C70039",resetJump(),window.location.hash="#mail",window.scrollTo(0,document.body.scrollHeight)},resetJump=function(){history.pushState("",document.title,window.location.pathname+window.location.search)};