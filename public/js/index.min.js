var onScrollFunction=function(){for(var e={},n=[].slice.call(document.getElementsByClassName("sectionTop")),t=0;t<n.length;t++)e[n[t].id]=n[t].offsetTop;var i=document.documentElement.scrollTop||document.body.scrollTop,t=0;for(t in e)e[t]<=i&&(document.querySelector(".header--inverse").classList.remove("header--inverse"),document.querySelector('a[href*="'+t+'"]').classList.add("header--inverse"));window.location.hash=document.querySelector(".header--inverse").getAttribute("href")},removeHighlighting=function(){document.querySelector(".header--inverse")&&document.querySelector(".header--inverse").classList.remove("header--inverse")},addHighlighting=function(){window.location.hash?document.querySelector('a[href*="'+window.location.hash+'"]').classList.add("header--inverse"):document.querySelector('a[href*="#about"]').classList.add("header--inverse")},isValidElement=function(e){return e.name&&e.value},isValidValue=function(e){return!["checkbox","radio"].includes(e.type)||e.checked},formToJson=function(e){return[].reduce.call(e,function(e,n){return isValidElement(n)&&isValidValue(n)&&(e[n.name]=n.value),e},{})},request=function(e,n,t){return new Promise(function(i,o){var l=new XMLHttpRequest;return l.open(e,n),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.onload=function(){200==l.status?i(l.responseText):o(new Error(l.statusText))},l.onerror=function(){o(new Error("unknown error"))},l.send(JSON.stringify(t))})};document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("menuToggle"),n=document.getElementById("headerMenu"),t=document.getElementById("menuOverlay"),i=[].slice.call(document.getElementsByClassName("header__menu__item")),o=function(i){toggleMenu(i,n,e,t)};if(document.documentElement.clientWidth<826){removeHighlighting();for(s=0;s<i.length;s++)i[s].addEventListener("click",o);e.addEventListener("click",o),t.addEventListener("click",o)}else addHighlighting(),window.addEventListener("scroll",onScrollFunction);window.addEventListener("resize",function(l){if(document.documentElement.clientWidth<826){showMobile(n,e,t),removeHighlighting(),window.removeEventListener("scroll",onScrollFunction);for(s=0;s<i.length;s++)i[s].addEventListener("click",o);e.addEventListener("click",o),t.addEventListener("click",o)}else{showDesktop(n,e,t),addHighlighting(),window.addEventListener("scroll",onScrollFunction);for(var s=0;s<i.length;s++)i[s].removeEventListener("click",o);e.removeEventListener("click",o),t.removeEventListener("click",o)}});for(var l=[].slice.call(document.getElementsByClassName("contact__input")),s=0;s<l.length;s++)l[s].addEventListener("blur",function(){this.value?this.classList.add("contact__input--filled"):this.classList.contains("contact__input--filled")&&this.classList.remove("contact__input--filled")});var r=document.getElementById("emailStudioRiehl"),c=document.getElementById("replaceOnSubmit");r.addEventListener("submit",function(e){submitForm(e,r,c)})});var submitForm=function(e,n,t){e.preventDefault();var i,o=formToJson(e.target.elements);return request("POST","/mail",o).then(function(e){renderMessage(n,t,i="true"==e?"Your message was successfully sent.  ":"Sorry, we couldn't send your message.  Try again later.  ")}).catch(function(e){renderMessage(n,t,i="Sorry, we couldn't send your message.  Try again later.  ")})},renderMessage=function(e,n,t){n.innerHTML=t,"Your message was successfully sent.  "==t?(e.style.display="none",n.style.color="unset"):n.style.color="#C70039",resetJump(),window.removeEventListener("scroll",onScrollFunction),window.location.hash="#mail",window.addEventListener("scroll",pauseScroll)},pauseScroll=function(){window.removeEventListener("scroll",pauseScroll),window.addEventListener("scroll",onScrollFunction)},resetJump=function(){history.pushState("",document.title,window.location.pathname+window.location.search)},toggleMenu=function(e,n,t,i){"hidden"==window.getComputedStyle(n,null).getPropertyValue("visibility")?(n.style.visibility="visible",i.style.visibility="visible",t.style.display="none",n.style.zIndex="150",i.style.zIndex="105"):(n.style.visibility="hidden",i.style.visibility="hidden",t.style.display="block",n.style.zIndex="-1",i.style.zIndex="-1")},showMobile=function(e,n,t){e.style.visibility="hidden",t.style.visibility="hidden",n.style.display="block",e.style.zIndex="-1",t.style.zIndex="-1"},showDesktop=function(e,n,t){e.style.visibility="visible",t.style.visibility="hidden",n.style.display="none",e.style.zIndex="150",t.style.zIndex="-1"};